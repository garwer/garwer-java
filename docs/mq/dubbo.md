随着互联网的发展，垂直架构的应用架构难以应付



> rpc:remote procedure call 即远程调用 是一种进程通信方式、一种技术思想而不是规范



解决分布式系统中 不同服务器之间通信调用，无需了解底层通信细节



注册中心,调度



特性

```
1.面向接口的高性能rpc调用
2.只能负载均衡
3.服务发现和注册
4.高度可扩展能力[spi 微内核插件]
5.可视化服务治理和运维
6.运行期间流量调度，可根据配置路由规则发布灰度
```



调用信息会发送到监控中心



zookeeper:树形目录结构



决定rpc性能

通信效率、序列化反序列化





### Dubbo负载均衡

random loadBalance 基于权重随机负载均衡机制

roundrobin loadBalance基于权重的轮询 还判断是否用过

最少活跃数 调服务器 查询最小请求耗时

一致性hash



实现LoadBalance接口 默认random



暴露和消费服务都可以



@refrece注解 配置loadbalance





### Dubbo原理

```
完成远程服务调用请求
通过网络传输 服务端收到请求再通过网络
收到消息后 组装成能够网络传输的消息体

服务端受到后进行解码，

rpc的作用 网络连接序列化 

对我们来说就像是个方法调用得到最后结果

底层通信通过netty
netty是个异步事件驱动的网络应用框架，极大简化了tcp和udp套接字服务器等网络编程


韩顺平netty
```





```
请求来 socket
业务没完成就不能释放

nio通过channel 
buffer数据传输
selector 多路复用 
```



bio是来一个请求开一个线程

selector监听多个通道

某个通道的状态准备好了 一个线程去处理





selector会不断轮询



netty启动开启端口 

场链接